expr {=
from fir.controls.CheckBoxList import CheckBoxList;
from fir.controls.PlainDatePicker import PlainDatePicker;
from fir.controls.utils import cls, firScopeOptsEnc;
from mkk.Pagination import Pagination;
def PohodListNavigation {=
	def.kv
		moduleName: "mkk/PohodList/Navigation/Navigation"
		cssBaseClass: "mkk-PohodListNavigation"
		instanceName: 'pohodListNavigation'
		pohodEnums: null
		filter: {}
		nav: {}
		paginationSideContent: null
		vpaths: {};
	def.body {*
		<div class="{=cls 'block'}" data-fir-module="{{moduleName}}">
			<input type="hidden" data-fir-opts="{=firScopeOptsEnc}"/>
			<form method="post" class="{=cls 'form'}">
				{=if false {*
				<div style="text-align:right; position:absolute; top:0.5rem; right:0.5rem;">
					<button type="button"
						class="{=cls 'printModeBtn'} btn btn-secondary btn-sm "
						>Версия для печати</button>
					<input type="hidden" name="for_print" class="{=cls 'isForPrintField'}"/>
				</div>
				*}}
				<div class="{=cls 'filtersWrapper'}">
					<label class="row form-group">
						<span class="col-auto col-form-label mr-2">Район похода</span>
						<div class="col">
							<input type="text"
								name="pohodRegion"
								class="form-control"
								value="{{filter.pohodRegion}}"/>
						</div>
					</label>
					<div class="{=cls 'enumFilterBlock'} row">
						{=repeat item in [
							{key: 'tourismKind', title: 'Вид туризма'},
							{key: 'complexity', title: 'Категория сложности'},
							{key: 'progress', title: 'Прохождение'},
							{key: 'claimState', title: 'Заявка'}
						] {*
						<span class="{=cls 'enumFilter'} col-md-3 col-sm-6 pr-2 mb-2">
							{=CheckBoxList
								instanceName: item.key
								items: {=at pohodEnums item.key}
								keyField: "v"
								captionField: "n"
								formField: item.key
								selectedKeys: {=at filter item.key}
								masterSwitchTitle: {*<span class="{=cls 'enumHeader'}">{{item.title}}</span>*}
							}
						</span> 
						*}}
					</div>
					<h6>Сроки похода</h6>
					<div class="{=cls 'dateRangeWrapper'} row form-group">
						<label class="{=cls 'dateRangeBegin'} col-md">
							<span class="{=cls 'dateRangeBefore'} col-form-label">с</span>
							{=PlainDatePicker
								instanceName: 'beginRangeHeadField'
								formField: 'dates__beginRangeHead'
								day: filter.dates.beginRangeHead.day
								month: filter.dates.beginRangeHead.month
								year: filter.dates.beginRangeHead.year
								dayPlaceholder: 'день'
								monthPlaceholder: 'месяц не выбран'
								yearPlaceholder: 'год'
							}
						</label>
						<label class="{=cls 'dateRangeEnd'} col-md text-xl-right">
							<span class="{=cls 'dateRangeBefore'} col-form-label">по</span>
							{=PlainDatePicker
								instanceName: 'endRangeTailField'
								formField: 'dates__endRangeTail'
								day: filter.dates.endRangeTail.day
								month: filter.dates.endRangeTail.month
								year: filter.dates.endRangeTail.year
								dayPlaceholder: 'день'
								monthPlaceholder: 'месяц не выбран'
								yearPlaceholder: 'год'
							}
						</label>
					</div>
					<div class="form-inline form-group">
						<div class="row">
							<label class="col-md-auto justify-content-start">
								<input type="checkbox"
									name="withFiles"
									{=if filter.withFiles == true 'checked'}
									class="checkbox mr-2"/>
								<span class="form-control-label">С доп. материалами</span>
							</label>
							<label class="col-md-auto justify-content-start">
								<input type="checkbox"
									name="withDataCheck"
									{=if filter.withDataCheck == true 'checked'}
									class="checkbox mr-2"/>
								<span class="form-control-label">Контроль данных</span>
							</label>

						</div>
								<button type="submit"
										name="CSV"
										value="CSV"
										formaction="{{vpaths.siteDynamic}}pohod.csv"
										class="{=cls 'csvBtn'} btn btn-outline-success btn-sm"
										>Печать  в CSV формат</button>
					</div>
					<div class="form-group">
						<button type="submit"
							class="{=cls 'searchBtn'} btn btn-primary btn-lg btn-block"
							>Найти</button>
					</div>
				</div>
				<div class="{=cls 'bottomRow'} row">
					<div class="{=cls 'pagination'} col-auto">
					{=Pagination
						formField: 'offset'
						pageSizeFormField: 'pageSize'
						offset: nav.offset
						pageSize: nav.pageSize or 10
						recordCount: nav.recordCount
					}
					</div>
					{{paginationSideContent}}
				</div>
			</form>
		</div>
	*}
}
}